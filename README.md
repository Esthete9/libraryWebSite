# Library WebSite
## Обзор
Сайт - библиотека.

### На сайте уже реализованно:
*  регистрация и аутентификация;
*  верификация пользователя по email;
*  разделение ролей на администраторов и обычных пользователей;
*  у администраторов есть возможность назначать и забирать книги у пользователей, проводить CRUD операции;

### Описание базы данных:
Было создано две таблицы - Person (хранит данные об пользователях) и book (хранит данные о книгах).

![db.png](images%2Fdb.png)

Между таблицами организованна связь один ко многим.

### Использованные технологии
* Java 11
* Spring Boot
* Spring Security
* Spring Data JPA
* Spring Validator
* Thymeleaf
* JUnit 5
* Mockito
* PostgreSQL

## Запуск

### С помощью Git
Склонировать репозиторий, выполнив команду -

`git clone https://github.com/Esthete9/weatherSensorService.git`

Так как данный сервис взаимодействует с базой данных (СУБД - PostgreSQL), для его запуска необходимо создать ее вместе с таблицами.
Для быстрой настройки в корне проекта лежит dump БД (файл - dump.sql)

*  1 - Создать новую базу данных. Для этого:

    - перейти в каталог bin выполнив команду `cd C:\Program Files\PostgreSQL\11\bin`

      (путь к каталогу может отличаться);

    -  выполнить команду `createdb -U postgres testdb` (где postgres суперпользователь, testdb новая база данных);

    -  далее выполнить команду `psql -U postgres -d new_db -f ПУТЬ ДО ФАЙЛА С ДАМПОМ` после этого дамп будет импортирован.


* 2 - Перейти в каталог `\finalSpringApp\src\main\resources` в нем, с помощью текстового редактора, открыть файл `application.properties`

  и внести свои данные в переменные:

    - spring.datasource.url=свои данные;
    - spring.datasource.username=имя пользователя;
    - spring.datasource.password=пароль.
    - upload.path=полный путь до каталога images в этом проекте (НО без указания диска!)
  
  для настройки отправки верификационного письма при регистрации нового пользователя - внести свои данные в переменные:

    - spring.mail.host=свои данные;
    - spring.mail.port=свои данные;
    - spring.mail.username= свои данные;
    - spring.mail.password= свои данные;
    - spring.mail.protocol=свои данные;
  
  пример заполнения данных - 

 ![example.png](images%2Fexample.png)
* 3 - Далее перейти в корневую папку проекта и выполнить команду -

`mvn spring-boot:run`

* 4 - Открыть браузер и перейти на `http://localhost:8080/book`

    - Чтобы авторизоваться под администратором: email - zeavs9800@gmail.com; пароль - admin.
---